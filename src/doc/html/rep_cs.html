<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>RKH: 2. Instantiating the composite states</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">RKH
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="_usage.html">Representing a state machine: step by step</a>      </li>
      <li class="navelem"><a class="el" href="representing.html">Representing the state machine</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">2. Instantiating the composite states </div>  </div>
</div>
<div class="contents">
<div class="textblock"><div class="image">
<img src="rkh_bunner.jpg" alt="rkh_bunner.jpg"/>
</div>
<p><br/>
 Prev: <a class="el" href="rep_sm.html">Instantiating the state machine</a><br/>
 Next: <a class="el" href="rep_bs.html">Declaring the basic states</a><br/>
<br/>
</p>
<p>A superstate or composite state is defined with the <a class="el" href="rkh_8h.html#acc24b2221cd374e66732a09fb24b56ce" title="This macro creates a composite state.">RKH_CREATE_COMP_STATE()</a> macro and declared with the <a class="el" href="rkh_8h.html#ab856423b3e65be3f55b7df3b2984e5fe" title="Declares a previously created state/pseudostate to be used as a global object.">RKH_DCLR_COMP_STATE()</a> macro. Frequently, each state machine and its states (superstates and substates) are encapsulated inside a dedicated source file (.c file), from which the <a class="el" href="rkh_8h.html#acc24b2221cd374e66732a09fb24b56ce" title="This macro creates a composite state.">RKH_CREATE_COMP_STATE()</a> macro is used.</p>
<p>The <a class="el" href="rep_cs.html#is1">Figure 3</a> highlights the state "S1" and its relevant aspects. Also, shows its implementation using the RKH framework.</p>
<p><br/>
 <a class="anchor" id="is1"></a></p>
<div class="image">
<img src="is1.png" alt="is1.png"/>
<div class="caption">
Figure 3 - composite state "S1"</div></div>
<p> <br/>
 <b>Defining the composite state "S1"</b> <br/>
 </p>
<div class="fragment"><pre class="fragment">(1) <span class="comment">//  my.c: state-machine&#39;s module</span>

(2) <a class="code" href="rkh_8h.html#acc24b2221cd374e66732a09fb24b56ce" title="This macro creates a composite state.">RKH_CREATE_COMP_STATE</a>(  S1, 
(3)                         0, 
(4)                         set_y_0, 
(5)                         dummy_exit, 
(6)                         RKH_ROOT, 
(7)                         &amp;S11, 
(8)                         &amp;DH );
</pre></div><p><b>Declaring the composite state "S1"</b> <br/>
 </p>
<div class="fragment"><pre class="fragment"><span class="comment">//  my.h: state-machine&#39;s header file</span>

<a class="code" href="rkh_8h.html#ab856423b3e65be3f55b7df3b2984e5fe" title="Declares a previously created state/pseudostate to be used as a global object.">RKH_DCLR_COMP_STATE</a>( S1 );
</pre></div><p>Explanation</p>
<ul>
<li>(1) Frequently, each state machine and its states are encapsulated inside a dedicated source file (.c file), from which the <a class="el" href="rkh_8h.html#acc24b2221cd374e66732a09fb24b56ce" title="This macro creates a composite state.">RKH_CREATE_COMP_STATE()</a> macro is used. </li>
<li>(2) <code>S1</code> is the state name. Represents a composite state structure. </li>
<li>(3) <code>0</code> is the value of state ID. </li>
<li>(4) <code>set_y_0()</code> defines the entry action to be executed unconditionally upon the entry to the <code>S1</code> state. This argument is optional, thus it could be declared as NULL. The RKHENT_T defines the function prototype. </li>
<li>(5) <code>dummy_exit()</code> defines the exit action, which is executed upon exit from the <code>S1</code> state. This argument is optional, thus it could be declared as NULL. The RKHEXT_T defines the function prototype. </li>
<li>(6) <code>RKH_ROOT</code> is the parent state of <code>S1</code>. If a state has no explicit superstate means that it is implicitly nested in the "top" state, and the parent state is defined by means of RKH_ROOT macro. The "top" state is a UML concept that denotes the ultimate root of the state hierarchy in a hierarchical state machine. </li>
<li>(7) <code>S11</code> is the default state of <code>S1</code> state machine. At each level of nesting, a superstate can have a private initial transition that designates the active substate after the superstate is entered directly. Here the initial transition of state <code>S1</code> designates the state <code>S11</code> as the initial active substate. </li>
<li>(8) <code>DH</code> is the deep history pseudostate. This argument is optional, thus it could be declared as NULL. See <a class="el" href="rkh_8h.html#a7a5376dd9929642f5b6e31def6d92bb4" title="This macro creates a shallow history pseudostate.">RKH_CREATE_SHALLOW_HISTORY_STATE()</a> macro and <a class="el" href="rkh_8h.html#a49995aa34cddd68fcc6416655ca408f8" title="This macro creates a deep history pseudostate.">RKH_CREATE_DEEP_HISTORY_STATE()</a>.</li>
</ul>
<p>In RKH every state is associated with a transition table, which is composed of a well-defined set of transitions. The general syntax of an expression labelling a transition in a statechart is <em>"i[c]/a"</em> where <em>i</em> is the input that triggers the transition, <em>c</em> is a condition that guards the transition from being taken unless it is true when <em>i</em> occurs, and <em>a</em> is an action that is carried out if and when the transition is taken. All of these parts are optional. Thus, in RKH each row in a table represents a transition, which is well-defined by an <em>event</em>, a <em>guard</em>, an <em>action</em>, and <em>target</em> state (or pseudostate). The <a class="el" href="rep_cs.html#is1">Figure 3</a> shows the transition table of "S1".</p>
<p>The following figures, <a class="el" href="rep_cs.html#is3">Figure 5</a>, and <a class="el" href="rep_cs.html#is11">Figure 6</a> highlights the composite states "S3", and "S11". Also, shows its implementation using the RKH framework.</p>
<p><br/>
 <a class="anchor" id="is3"></a></p>
<div class="image">
<img src="is3.png" alt="is3.png"/>
<div class="caption">
Figure 5 - composite state "S3"</div></div>
<p> <br/>
 <a class="anchor" id="is11"></a></p>
<div class="image">
<img src="is11.png" alt="is11.png"/>
<div class="caption">
Figure 6 - composite state "S11"</div></div>
<p> <br/>
</p>
<p><br/>
 Prev: <a class="el" href="rep_sm.html">Instantiating the state machine</a><br/>
 Next: <a class="el" href="rep_bs.html">Declaring the basic states</a><br/>
<br/>
 </p>
</div></div>


<hr class="footer"/><address class="footer"><small>
Generated on Wed May 9 2012 13:05:36 for RKH by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
