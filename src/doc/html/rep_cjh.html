<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>RKH: 4. Declaring the pseudostates</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">RKH
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="_usage.html">Representing a state machine: step by step</a>      </li>
      <li class="navelem"><a class="el" href="representing.html">Representing the state machine</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">4. Declaring the pseudostates </div>  </div>
</div>
<div class="contents">
<div class="textblock"><div class="image">
<img src="rkh_bunner.jpg" alt="rkh_bunner.jpg"/>
</div>
<p><br/>
 Prev: <a class="el" href="rep_bs.html">Declaring the basic states</a><br/>
 Next: <a class="el" href="rep_def.html">Defining the state machine's objects</a><br/>
<br/>
</p>
<p>The conditional, junction, shallow history, and deep history pseudostates are created using <a class="el" href="rkh_8h.html#ade7387dead9112bd67580de3350aee51" title="This macro creates a conditional pseudostate.">RKH_CREATE_COND_STATE()</a>, <a class="el" href="rkh_8h.html#a9f73c81d95a4bd5bec21e10ea6f05add" title="This macro creates a junction pseudostate.">RKH_CREATE_JUNCTION_STATE()</a>, <a class="el" href="rkh_8h.html#a7a5376dd9929642f5b6e31def6d92bb4" title="This macro creates a shallow history pseudostate.">RKH_CREATE_SHALLOW_HISTORY_STATE()</a>, and <a class="el" href="rkh_8h.html#a49995aa34cddd68fcc6416655ca408f8" title="This macro creates a deep history pseudostate.">RKH_CREATE_DEEP_HISTORY_STATE()</a> macros respectively, which are defined in <b><a class="el" href="rkh_8h.html" title="RKH platform-independent interface.">rkh.h</a></b> file. Also, these macros are broadly explained in the <a class="el" href="qref.html">Quick reference</a> section.</p>
<p>The following figures, <a class="el" href="rep_cjh.html#ic1">Figure 11</a>, <a class="el" href="rep_cjh.html#ic2">Figure 12</a>, <a class="el" href="rep_cjh.html#ij">Figure 13</a>, and <a class="el" href="rep_cjh.html#ih">Figure 14</a> highlights the pseudostates "C1", "C2", "J", "H", and "DH" respectively. Also, shows its implementation using the RKH framework.</p>
<p><br/>
 <a class="anchor" id="ic1"></a></p>
<div class="image">
<img src="ic1.png" alt="ic1.png"/>
<div class="caption">
Figure 11 - conditional pseudostate "C1"</div></div>
<p> <br/>
 <a class="anchor" id="ic2"></a></p>
<div class="image">
<img src="ic2.png" alt="ic2.png"/>
<div class="caption">
Figure 12 - conditional pseudostate "C2"</div></div>
<p> A condition connector has one incoming transition and can have several outgoing transition segments called branches. Branches are labeled with guards that determine which one is to be actually taken. Since the condition connector is an OR connector, only one of the branches can be taken. Each condition connector can have one special branch with a guard labeled rkh_else, which is taken if all the guards on the other branches are false. Branches cannot contain triggers, but in addition to a guard they may contain actions. A branch can enter another condition connector, thus providing for the nesting of branches. In RKH branches are defined by the macro <a class="el" href="rkh_8h.html#ad1ebb38b7398d7f4ec60ef3e0922d033" title="This macro defines a branch in the branch table.">RKH_BRANCH()</a>. The general syntax of an expression labelling a branch in a statechart is <em>"[c]/a"</em> where <em>c</em> is a condition that guards the transition from being taken unless it is true, and <em>a</em> is an action that is carried out if and when the transition is taken. All of these parts are optional. The following listing shows the C2's branch table:</p>
<div class="fragment"><pre class="fragment">(1) <a class="code" href="rkh_8h.html#a57353c7dab6539b0a7ae92142b73ad2e">RKH_CREATE_BRANCH_TABLE</a>( C2 )
(2)     <a class="code" href="rkh_8h.html#ad1ebb38b7398d7f4ec60ef3e0922d033" title="This macro defines a branch in the branch table.">RKH_BRANCH</a>( x1,         dummy_act,      &amp;S3     ),
        <a class="code" href="rkh_8h.html#ad1ebb38b7398d7f4ec60ef3e0922d033" title="This macro defines a branch in the branch table.">RKH_BRANCH</a>( x2_or_x3,   NULL,           &amp;S32    ),
(3)     <a class="code" href="rkh_8h.html#ad1ebb38b7398d7f4ec60ef3e0922d033" title="This macro defines a branch in the branch table.">RKH_BRANCH</a>( ELSE,       NULL,           &amp;S2     ),
(4) <a class="code" href="rkh_8h.html#a179912e226da08c982c9e93d77886c53" title="This macro is used to terminate a state transition table. This table have the general structure shown...">RKH_END_BRANCH_TABLE</a>
</pre></div><p>Explanation</p>
<ul>
<li>(1) The <a class="el" href="rkh_8h.html#a57353c7dab6539b0a7ae92142b73ad2e">RKH_CREATE_BRANCH_TABLE()</a> macro creates the "C2"'s branch table. Each table type always begins with the macro <a class="el" href="rkh_8h.html#a57353c7dab6539b0a7ae92142b73ad2e">RKH_CREATE_BRANCH_TABLE()</a> and ends with the macro <a class="el" href="rkh_8h.html#a179912e226da08c982c9e93d77886c53" title="This macro is used to terminate a state transition table. This table have the general structure shown...">RKH_END_BRANCH_TABLE()</a>. As noted above, sandwiched between these macros are the segment macros that actually comprise the condition connector.</li>
</ul>
<ul>
<li>(2) The <a class="el" href="rkh_8h.html#ad1ebb38b7398d7f4ec60ef3e0922d033" title="This macro defines a branch in the branch table.">RKH_BRANCH()</a> macro defines a branch segment, where <code>x1()</code> is the guard function, <code>dummy_act()</code> is the action function to be taken, and "S3" is the target state.</li>
</ul>
<ul>
<li>(3) If all the guards on the other branches are false <code>abort</code> function will be invoked, and "S2" will be the next state.</li>
</ul>
<ul>
<li>(4) The <a class="el" href="rkh_8h.html#a179912e226da08c982c9e93d77886c53" title="This macro is used to terminate a state transition table. This table have the general structure shown...">RKH_END_BRANCH_TABLE()</a> macro ends branch table.</li>
</ul>
<p>As said above, the actions and guards in RKH framework are represented by functions.</p>
<p><br/>
 <a class="anchor" id="ij"></a></p>
<div class="image">
<img src="ij.png" alt="ij.png"/>
<div class="caption">
Figure 13 - junction pseudostate "J"</div></div>
<p> <br/>
 <a class="anchor" id="ih"></a></p>
<div class="image">
<img src="ih.png" alt="ih.png"/>
<div class="caption">
Figure 14 - history pseudostates "H" and "DH"</div></div>
<p> <br/>
 Prev: <a class="el" href="rep_bs.html">Declaring the basic states</a><br/>
 Next: <a class="el" href="rep_def.html">Defining the state machine's objects</a><br/>
<br/>
 </p>
</div></div>


<hr class="footer"/><address class="footer"><small>
Generated on Wed May 9 2012 13:05:36 for RKH by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
