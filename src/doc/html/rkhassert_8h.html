<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>RKH: rkhassert.h File Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">RKH
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">rkhassert.h File Reference</div>  </div>
</div>
<div class="contents">

<p>Assert definitions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="rkhcfg_8h_source.html">rkhcfg.h</a>&quot;</code><br/>
</div>
<p><a href="rkhassert_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rkhassert_8h.html#ac6fc131b93bf54a352fb40ff088f3a5a">RKH_MODULE_NAME</a>(__fname)&#160;&#160;&#160;static RKHROM char *const m_name = #__fname;</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This macro appears at the top of each C/C++ source file defining a name for that file.  <a href="#ac6fc131b93bf54a352fb40ff088f3a5a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a57dfc35a74e5e399f3c6c5f0bad6e6ba"></a><!-- doxytag: member="rkhassert.h::RKH_THIS_MODULE" ref="a57dfc35a74e5e399f3c6c5f0bad6e6ba" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rkhassert_8h.html#a57dfc35a74e5e399f3c6c5f0bad6e6ba">RKH_THIS_MODULE</a>&#160;&#160;&#160;static RKHROM char *const m_name = __FILE__;</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This macro appears at the top of each C/C++ source file defining a name for that file, by means of __FILE__ compiler directive. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rkhassert_8h.html#a44e0d6b7a49a3b03d45b88111391031d">RKHASSERT</a>(exp)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The <a class="el" href="rkhassert_8h.html#a44e0d6b7a49a3b03d45b88111391031d" title="The RKHASSERT() macro is used to check expressions that ought to be true as long as the program is ru...">RKHASSERT()</a> macro is used to check expressions that ought to be true as long as the program is running correctly.  <a href="#a44e0d6b7a49a3b03d45b88111391031d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rkhassert_8h.html#a859d6d0ca084abb8e273c0c0d5c79c35">RKHALLEGE</a>(exp)&#160;&#160;&#160;RKHASSERT( exp )</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">General purpose assertion that ALWAYS evaluates the <em>exp</em> argument and calls the <a class="el" href="rkhassert_8h.html#a44e0d6b7a49a3b03d45b88111391031d" title="The RKHASSERT() macro is used to check expressions that ought to be true as long as the program is ru...">RKHASSERT()</a> macro if the <em>exp</em> evaluates to FALSE.  <a href="#a859d6d0ca084abb8e273c0c0d5c79c35"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rkhassert_8h.html#af9b44e64825198cb862651d035b7d2b2">RKHERROR</a>()&#160;&#160;&#160;rkh_assert(m_name,__LINE__)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Assertion that always calls the <a class="el" href="rkhassert_8h.html#ad3c2370571718a2d3fc76b9bf9850cd5" title="Callback invoked in case the condition passed to RKHASSERT(), RKHREQUIRE(), RKHENSURE(), RKHERROR(), or RKHALLEGE() evaluates to FALSE.">rkh_assert()</a> callback if ever executed.  <a href="#af9b44e64825198cb862651d035b7d2b2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rkhassert_8h.html#adc8b87efd3c9461ef70cc0de459e35d2">RKHREQUIRE</a>(exp)&#160;&#160;&#160;RKHASSERT( exp )</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This macro checks the precondition.  <a href="#adc8b87efd3c9461ef70cc0de459e35d2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rkhassert_8h.html#a2b0f37321a4da4d6d7b7274b8b03aa8c">RKHENSURE</a>(exp)&#160;&#160;&#160;RKHASSERT( exp )</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This macro checks the postcondition.  <a href="#a2b0f37321a4da4d6d7b7274b8b03aa8c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rkhassert_8h.html#a5a7aaadc644dd712104fee341388c3fa">RKHINVARIANT</a>(exp)&#160;&#160;&#160;RKHASSERT( exp )</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This macro is used to check a loop invariant.  <a href="#a5a7aaadc644dd712104fee341388c3fa"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rkhassert_8h.html#ad3c2370571718a2d3fc76b9bf9850cd5">rkh_assert</a> (const char *const file, int line)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback invoked in case the condition passed to <a class="el" href="rkhassert_8h.html#a44e0d6b7a49a3b03d45b88111391031d" title="The RKHASSERT() macro is used to check expressions that ought to be true as long as the program is ru...">RKHASSERT()</a>, <a class="el" href="rkhassert_8h.html#adc8b87efd3c9461ef70cc0de459e35d2" title="This macro checks the precondition.">RKHREQUIRE()</a>, <a class="el" href="rkhassert_8h.html#a2b0f37321a4da4d6d7b7274b8b03aa8c" title="This macro checks the postcondition.">RKHENSURE()</a>, <a class="el" href="rkhassert_8h.html#af9b44e64825198cb862651d035b7d2b2" title="Assertion that always calls the rkh_assert() callback if ever executed.">RKHERROR()</a>, or <a class="el" href="rkhassert_8h.html#a859d6d0ca084abb8e273c0c0d5c79c35" title="General purpose assertion that ALWAYS evaluates the exp argument and calls the RKHASSERT() macro if t...">RKHALLEGE()</a> evaluates to FALSE.  <a href="#ad3c2370571718a2d3fc76b9bf9850cd5"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Assert definitions. </p>
<p>The assertions (<code><a class="el" href="rkhassert_8h.html#a44e0d6b7a49a3b03d45b88111391031d" title="The RKHASSERT() macro is used to check expressions that ought to be true as long as the program is ru...">RKHASSERT()</a></code> macro) are used to check expressions that ought to be true as long as the program is running correctly. It is a convenient way to insert sanity checks. A number of philosophies can be employed when deciding where to use an <code><a class="el" href="rkhassert_8h.html#a44e0d6b7a49a3b03d45b88111391031d" title="The RKHASSERT() macro is used to check expressions that ought to be true as long as the program is ru...">RKHASSERT()</a></code> macro. Broadly speaking, the assertions only serve the purposes of catching bugs and helping documentation. Helping to document the code means that the statements inside the assertion tell the reader something he might not already know.</p>
<dl class="note"><dt><b>Note:</b></dt><dd>The preprocessor switch RKH_ASSERT_EN disables checking assertions. In particular macros <a class="el" href="rkhassert_8h.html#a44e0d6b7a49a3b03d45b88111391031d" title="The RKHASSERT() macro is used to check expressions that ought to be true as long as the program is ru...">RKHASSERT()</a>, <a class="el" href="rkhassert_8h.html#adc8b87efd3c9461ef70cc0de459e35d2" title="This macro checks the precondition.">RKHREQUIRE()</a>, <a class="el" href="rkhassert_8h.html#a2b0f37321a4da4d6d7b7274b8b03aa8c" title="This macro checks the postcondition.">RKHENSURE()</a>, <a class="el" href="rkhassert_8h.html#a5a7aaadc644dd712104fee341388c3fa" title="This macro is used to check a loop invariant.">RKHINVARIANT()</a>, and <a class="el" href="rkhassert_8h.html#af9b44e64825198cb862651d035b7d2b2" title="Assertion that always calls the rkh_assert() callback if ever executed.">RKHERROR()</a> do NOT evaluate the test condition passed as the argument to these macros. One notable exception is the macro <a class="el" href="rkhassert_8h.html#a859d6d0ca084abb8e273c0c0d5c79c35" title="General purpose assertion that ALWAYS evaluates the exp argument and calls the RKHASSERT() macro if t...">RKHALLEGE()</a>, that still evaluates the test condition, but does not report assertion failures when the switch RKH_ASSERT_EN is defined.</dd></dl>
<p>Example of use: </p>
<div class="fragment"><pre class="fragment">    ...
    some_function( <span class="keyword">const</span> <span class="keywordtype">char</span> *p, <span class="keywordtype">int</span> size )
    {
        <a class="code" href="rkhassert_8h.html#a44e0d6b7a49a3b03d45b88111391031d" title="The RKHASSERT() macro is used to check expressions that ought to be true as long as the program is ru...">RKHASSERT</a>(  p != ( <span class="keyword">const</span> <span class="keywordtype">char</span>* )0 &amp;&amp;
                    size &gt; 0  &amp;&amp; size &lt; MAX_SIZE );
        ...
    }
</pre></div><p>If the expression evaluates to FALSE (0), the function <a class="el" href="rkhassert_8h.html#ad3c2370571718a2d3fc76b9bf9850cd5" title="Callback invoked in case the condition passed to RKHASSERT(), RKHREQUIRE(), RKHENSURE(), RKHERROR(), or RKHALLEGE() evaluates to FALSE.">rkh_assert()</a> will be invoked, typically halting the program in some way and storing or reporting the error code. Once the <a class="el" href="rkhassert_8h.html#ad3c2370571718a2d3fc76b9bf9850cd5" title="Callback invoked in case the condition passed to RKHASSERT(), RKHREQUIRE(), RKHENSURE(), RKHERROR(), or RKHALLEGE() evaluates to FALSE.">rkh_assert()</a> callback has stored or reported the error, it must decide on the system's next action. One option is:</p>
<ol type="1">
<li>disable general interrupt</li>
<li>stores or send detected error (could be use a trace facility)</li>
<li>trigger a software reset</li>
</ol>
<p>The policy chooses will be largely determined by the nature of product. If the system is running with a source level debugger, place a breakpoint within. Another option is to trigger a software reset and attempt to run the system again.</p>
<p>Also a unique identifier that can be reported from the field, easing the investigation of the problem. Therefore, the error code could be composed of the software version number, file number (.c file), line number of assertion, and other information. A number is easier to fill in on a report form and easier to store in NVRAM.</p>
<p>The following listing shows a illustrative example for VC8 IDE:</p>
<div class="fragment"><pre class="fragment">    <span class="keywordtype">void</span> 
    <a class="code" href="rkhassert_8h.html#ad3c2370571718a2d3fc76b9bf9850cd5" title="Callback invoked in case the condition passed to RKHASSERT(), RKHREQUIRE(), RKHENSURE(), RKHERROR(), or RKHALLEGE() evaluates to FALSE.">rkh_assert</a>( RKHROM <span class="keywordtype">char</span> * <span class="keyword">const</span> file, <span class="keywordtype">int</span> line )
    {
        printf( <span class="stringliteral">&quot;RKHASSERT: [%d] line from %s file\n&quot;</span>, line, file );
        __debugbreak();
    }
</pre></div> 
<p>Definition in file <a class="el" href="rkhassert_8h_source.html">rkhassert.h</a>.</p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="ac6fc131b93bf54a352fb40ff088f3a5a"></a><!-- doxytag: member="rkhassert.h::RKH_MODULE_NAME" ref="ac6fc131b93bf54a352fb40ff088f3a5a" args="(__fname)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RKH_MODULE_NAME</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">__fname</td><td>)</td>
          <td>&#160;&#160;&#160;static RKHROM char *const m_name = #__fname;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This macro appears at the top of each C/C++ source file defining a name for that file. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">__fname</td><td>file name where the assertion failed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="rkhassert_8h_source.html#l00162">162</a> of file <a class="el" href="rkhassert_8h_source.html">rkhassert.h</a>.</p>

</div>
</div>
<a class="anchor" id="a44e0d6b7a49a3b03d45b88111391031d"></a><!-- doxytag: member="rkhassert.h::RKHASSERT" ref="a44e0d6b7a49a3b03d45b88111391031d" args="(exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RKHASSERT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">exp</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Value:</b><div class="fragment"><pre class="fragment"><span class="keywordflow">if</span>( ( exp ) )                           \
        {}                                      \
        else                                    \
        {                                       \
            rkh_assert( m_name, __LINE__ );     \
        }
</pre></div>
<p>The <a class="el" href="rkhassert_8h.html#a44e0d6b7a49a3b03d45b88111391031d" title="The RKHASSERT() macro is used to check expressions that ought to be true as long as the program is ru...">RKHASSERT()</a> macro is used to check expressions that ought to be true as long as the program is running correctly. </p>
<p>Example of use: </p>
<div class="fragment"><pre class="fragment">    ...
    some_function( <span class="keyword">const</span> <span class="keywordtype">char</span> *p, <span class="keywordtype">int</span> size )
    {
        <a class="code" href="rkhassert_8h.html#a44e0d6b7a49a3b03d45b88111391031d" title="The RKHASSERT() macro is used to check expressions that ought to be true as long as the program is ru...">RKHASSERT</a>(  p != ( <span class="keyword">const</span> <span class="keywordtype">char</span>* )0 &amp;&amp;
                    size &gt; 0  &amp;&amp;
                    size &lt; MAX_SIZE );
        ...
    }
</pre></div><dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">exp</td><td>expression to be checked.</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="rkhassert_8h.html#a859d6d0ca084abb8e273c0c0d5c79c35" title="General purpose assertion that ALWAYS evaluates the exp argument and calls the RKHASSERT() macro if t...">RKHALLEGE()</a>, <a class="el" href="rkhassert_8h.html#adc8b87efd3c9461ef70cc0de459e35d2" title="This macro checks the precondition.">RKHREQUIRE()</a>, <a class="el" href="rkhassert_8h.html#a2b0f37321a4da4d6d7b7274b8b03aa8c" title="This macro checks the postcondition.">RKHENSURE()</a>, <a class="el" href="rkhassert_8h.html#af9b44e64825198cb862651d035b7d2b2" title="Assertion that always calls the rkh_assert() callback if ever executed.">RKHERROR()</a> and <a class="el" href="rkhassert_8h.html#a5a7aaadc644dd712104fee341388c3fa" title="This macro is used to check a loop invariant.">RKHINVARIANT()</a> macros. </dd></dl>

<p>Definition at line <a class="el" href="rkhassert_8h_source.html#l00199">199</a> of file <a class="el" href="rkhassert_8h_source.html">rkhassert.h</a>.</p>

</div>
</div>
<a class="anchor" id="a859d6d0ca084abb8e273c0c0d5c79c35"></a><!-- doxytag: member="rkhassert.h::RKHALLEGE" ref="a859d6d0ca084abb8e273c0c0d5c79c35" args="(exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RKHALLEGE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">exp</td><td>)</td>
          <td>&#160;&#160;&#160;RKHASSERT( exp )</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>General purpose assertion that ALWAYS evaluates the <em>exp</em> argument and calls the <a class="el" href="rkhassert_8h.html#a44e0d6b7a49a3b03d45b88111391031d" title="The RKHASSERT() macro is used to check expressions that ought to be true as long as the program is ru...">RKHASSERT()</a> macro if the <em>exp</em> evaluates to FALSE. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>The <em>exp</em> argument IS always evaluated even when assertions are disabled with the RKH_ASSERT_EN. When the RKH_ASSERT_EN is set to one (1), the <a class="el" href="rkhassert_8h.html#a44e0d6b7a49a3b03d45b88111391031d" title="The RKHASSERT() macro is used to check expressions that ought to be true as long as the program is ru...">RKHASSERT()</a> macro is NOT called, even if the <em>exp</em> evaluates to FALSE. </dd></dl>

<p>Definition at line <a class="el" href="rkhassert_8h_source.html#l00219">219</a> of file <a class="el" href="rkhassert_8h_source.html">rkhassert.h</a>.</p>

</div>
</div>
<a class="anchor" id="af9b44e64825198cb862651d035b7d2b2"></a><!-- doxytag: member="rkhassert.h::RKHERROR" ref="af9b44e64825198cb862651d035b7d2b2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RKHERROR</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;rkh_assert(m_name,__LINE__)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Assertion that always calls the <a class="el" href="rkhassert_8h.html#ad3c2370571718a2d3fc76b9bf9850cd5" title="Callback invoked in case the condition passed to RKHASSERT(), RKHREQUIRE(), RKHENSURE(), RKHERROR(), or RKHALLEGE() evaluates to FALSE.">rkh_assert()</a> callback if ever executed. </p>
<dl class="note"><dt><b>Note:</b></dt><dd>Can be disabled with the RKH_ASSERT_EN switch. </dd></dl>

<p>Definition at line <a class="el" href="rkhassert_8h_source.html#l00231">231</a> of file <a class="el" href="rkhassert_8h_source.html">rkhassert.h</a>.</p>

</div>
</div>
<a class="anchor" id="adc8b87efd3c9461ef70cc0de459e35d2"></a><!-- doxytag: member="rkhassert.h::RKHREQUIRE" ref="adc8b87efd3c9461ef70cc0de459e35d2" args="(exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RKHREQUIRE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">exp</td><td>)</td>
          <td>&#160;&#160;&#160;RKHASSERT( exp )</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This macro checks the precondition. </p>
<p>This macro is equivalent to <a class="el" href="rkhassert_8h.html#a44e0d6b7a49a3b03d45b88111391031d" title="The RKHASSERT() macro is used to check expressions that ought to be true as long as the program is ru...">RKHASSERT()</a> macro, except the name provides a better documentation of the intention of this assertion. </p>

<p>Definition at line <a class="el" href="rkhassert_8h_source.html#l00251">251</a> of file <a class="el" href="rkhassert_8h_source.html">rkhassert.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2b0f37321a4da4d6d7b7274b8b03aa8c"></a><!-- doxytag: member="rkhassert.h::RKHENSURE" ref="a2b0f37321a4da4d6d7b7274b8b03aa8c" args="(exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RKHENSURE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">exp</td><td>)</td>
          <td>&#160;&#160;&#160;RKHASSERT( exp )</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This macro checks the postcondition. </p>
<p>This macro is equivalent to <a class="el" href="rkhassert_8h.html#a44e0d6b7a49a3b03d45b88111391031d" title="The RKHASSERT() macro is used to check expressions that ought to be true as long as the program is ru...">RKHASSERT()</a> macro, except the name provides a better documentation of the intention of this assertion. </p>

<p>Definition at line <a class="el" href="rkhassert_8h_source.html#l00262">262</a> of file <a class="el" href="rkhassert_8h_source.html">rkhassert.h</a>.</p>

</div>
</div>
<a class="anchor" id="a5a7aaadc644dd712104fee341388c3fa"></a><!-- doxytag: member="rkhassert.h::RKHINVARIANT" ref="a5a7aaadc644dd712104fee341388c3fa" args="(exp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RKHINVARIANT</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">exp</td><td>)</td>
          <td>&#160;&#160;&#160;RKHASSERT( exp )</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This macro is used to check a loop invariant. </p>
<p>This macro is equivalent to <a class="el" href="rkhassert_8h.html#a44e0d6b7a49a3b03d45b88111391031d" title="The RKHASSERT() macro is used to check expressions that ought to be true as long as the program is ru...">RKHASSERT()</a> macro, except the name provides a better documentation of the intention of this assertion. </p>

<p>Definition at line <a class="el" href="rkhassert_8h_source.html#l00273">273</a> of file <a class="el" href="rkhassert_8h_source.html">rkhassert.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ad3c2370571718a2d3fc76b9bf9850cd5"></a><!-- doxytag: member="rkhassert.h::rkh_assert" ref="ad3c2370571718a2d3fc76b9bf9850cd5" args="(const char *const file, int line)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void rkh_assert </td>
          <td>(</td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Callback invoked in case the condition passed to <a class="el" href="rkhassert_8h.html#a44e0d6b7a49a3b03d45b88111391031d" title="The RKHASSERT() macro is used to check expressions that ought to be true as long as the program is ru...">RKHASSERT()</a>, <a class="el" href="rkhassert_8h.html#adc8b87efd3c9461ef70cc0de459e35d2" title="This macro checks the precondition.">RKHREQUIRE()</a>, <a class="el" href="rkhassert_8h.html#a2b0f37321a4da4d6d7b7274b8b03aa8c" title="This macro checks the postcondition.">RKHENSURE()</a>, <a class="el" href="rkhassert_8h.html#af9b44e64825198cb862651d035b7d2b2" title="Assertion that always calls the rkh_assert() callback if ever executed.">RKHERROR()</a>, or <a class="el" href="rkhassert_8h.html#a859d6d0ca084abb8e273c0c0d5c79c35" title="General purpose assertion that ALWAYS evaluates the exp argument and calls the RKHASSERT() macro if t...">RKHALLEGE()</a> evaluates to FALSE. </p>
<p>If the expression evaluates to FALSE (0), the function <a class="el" href="rkhassert_8h.html#ad3c2370571718a2d3fc76b9bf9850cd5" title="Callback invoked in case the condition passed to RKHASSERT(), RKHREQUIRE(), RKHENSURE(), RKHERROR(), or RKHALLEGE() evaluates to FALSE.">rkh_assert()</a> will be invoked, typically halting the program in some way and storing or reporting the error code. Once the <a class="el" href="rkhassert_8h.html#ad3c2370571718a2d3fc76b9bf9850cd5" title="Callback invoked in case the condition passed to RKHASSERT(), RKHREQUIRE(), RKHENSURE(), RKHERROR(), or RKHALLEGE() evaluates to FALSE.">rkh_assert()</a> callback has stored or reported the error, it must decide on the system's next action. One option is:</p>
<ol type="1">
<li>disable general interrupt</li>
<li>stores or send detected error (could be use a trace facility)</li>
<li>trigger a software reset</li>
</ol>
<p>The policy chooses will be largely determined by the nature of product. If the system is running with a source level debugger, place a breakpoint within. Another option is to trigger a software reset and attempt to run the system again.</p>
<p>Also a unique identifier that can be reported from the field, easing the investigation of the problem. Therefore, the error code could be composed of the software version number, file number (.c file), line number of assertion, and other information. A number is easier to fill in on a report form and easier to store in NVRAM.</p>
<p>The following listing shows a illustrative example for VC2008 IDE:</p>
<div class="fragment"><pre class="fragment">    <span class="keywordtype">void</span> 
    <a class="code" href="rkhassert_8h.html#ad3c2370571718a2d3fc76b9bf9850cd5" title="Callback invoked in case the condition passed to RKHASSERT(), RKHREQUIRE(), RKHENSURE(), RKHERROR(), or RKHALLEGE() evaluates to FALSE.">rkh_assert</a>( RKHROM <span class="keywordtype">char</span> * <span class="keyword">const</span> file, <span class="keywordtype">int</span> line )
    {
        printf( <span class="stringliteral">&quot;RKHASSERT: [%d] line from %s file\n&quot;</span>, line, file );
        __debugbreak();
    }
</pre></div><dl class="note"><dt><b>Note:</b></dt><dd>The <a class="el" href="rkhassert_8h.html#ad3c2370571718a2d3fc76b9bf9850cd5" title="Callback invoked in case the condition passed to RKHASSERT(), RKHREQUIRE(), RKHENSURE(), RKHERROR(), or RKHALLEGE() evaluates to FALSE.">rkh_assert()</a> callback will only get called if RKH_ASSERT_EN is set to 1 within <a class="el" href="rkhcfg_8h.html" title="RKH user configuration.">rkhcfg.h</a> file. When this is set the application must provide the callback function.</dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">file</td><td>file name where the assertion failed </td></tr>
    <tr><td class="paramname">line</td><td>line number at which the assertion failed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Wed May 9 2012 13:05:35 for RKH by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
